<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Auszahlungsquittung – Förderverein Evangelische KiTa Spielberg e.V.</title>
    <meta name="keywords" content="Drucken, Quittung, Quittungen, ausdrucken, online">
    <meta name="description" content="Auszahlungsquittung des Fördervereins Evangelische KiTa Spielberg e.V.">
    
    <link rel="stylesheet" type="text/css" href="styles/formate.css">
    
    <style>
        @media print {
            .steuerung { display: none; }
            #signature-auszahlung { border: 1px solid #888 !important; display: inline-block !important; }
            #clearSignatureAuszahlung { display: none !important; }
            .rahmenau-auszahlung { background-image: url('../bilder/raute.png') !important; background-repeat: repeat !important; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        }
    </style>
</head>
<body>
    <main>
        <!-- Auszahlungsquittung -->
        <section id="auszahlungsquittungSection" style="display:none;">
            <table width="672" height="508" border="0" class="rahmenau-auszahlung">
                <tr>
                    <td align="center">
                        <table width="671" height="507" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed">
                            <tr>
                                <td rowspan="11" style="width:56"></td>
                                <td colspan="2" align="right" width="453"><span class="titel">Auszahlungsquittung</span></td>
                                <td rowspan="11">
                                    <img src="bilder/leer.gif" width="7" height="1" alt="" border="0">
                                </td>
                            </tr>
                            <tr>
                                <td width="217" rowspan="1" valign="top">
                                    <img src="bilder/fveks_text.png" alt="Förderverein Evangelische KiTa Spielberg e.V. Logo" style="margin-bottom: 12px; max-width: 170px;">
                                </td>
                                <td class="rahmenliob" width="236" height="35">
                                    <label for="auszahlungsbetrag"><span class="textg">Auszahlungsbetrag EUR</span></label>
                                    <input type="text" maxlength="13" name="auszahlungsbetrag" id="auszahlungsbetrag" style="width:110px">
                                </td>
                            </tr>
                            <tr>
                                <td class="rahmenlioub" width="236" height="37">
                                    <label for="auszahlungsnr"><span class="textg">Nr.</span></label>
                                    <input type="text" maxlength="20" name="auszahlungsnr" id="auszahlungsnr" style="width:180px">
                                </td>
                            </tr>
                            <tr>
                                <td class="rahmenlio">
                                    <label for="auszahlungsworte"><span class="textg">EUR in Worten</span></label>
                                    <input type="text" name="auszahlungsworte" id="auszahlungsworte" style="width:180px" maxlength="45">
                                </td>
                            </tr>
                            <tr valign="top" style="height:30px;">
                                <td class="rahmenliob" colspan="2">
                                    <label for="auszahlungsgrund"><span class="textg">Grund der Auszahlung</span></label>
                                    <input type="text" maxlength="45" name="auszahlungsgrund" id="auszahlungsgrund" style="width:450px">
                                </td>
                            </tr>
                            <tr valign="top" style="height:30px;">
                                <td class="rahmenlio" colspan="2">
                                    <table border="0" style="table-layout:fixed" cellspacing="0" cellpadding="0">
                                        <tr>
                                            <td style="height:30px; width:70px" valign="top"><span class="textg">Empfänger</span></td>
                                            <td>
                                                <label for="auszahlungsempfaenger" class="visually-hidden">Empfänger</label>
                                                <input type="text" name="auszahlungsempfaenger" id="auszahlungsempfaenger" style="width:363px" maxlength="45">
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr valign="top" style="height:30px;">
                                <td class="rahmenlio" colspan="2">
                                    <table border="0" style="table-layout:fixed" cellspacing="0" cellpadding="0">
                                        <tr>
                                            <td style="height:30px; width:120px" valign="top"><span class="textg">Ausgezahlt von</span></td>
                                            <td>
                                                <label for="ausgezahltvon" class="visually-hidden">Ausgezahlt von</label>
                                                <input type="text" name="ausgezahltvon" id="ausgezahltvon" style="width:313px" maxlength="45" value="Kassenwart *Simon Kloker)">
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr style="height:30px;">
                                <td class="rahmenlio" colspan="2">
                                    <table border="0" style="table-layout:fixed" cellspacing="0" cellpadding="0">
                                        <tr>
                                            <td style="width:70px;"><img src="bilder/leer.gif" width="70" height="10" alt=""></td>
                                            <td>
                                                <!-- Platzhalter für spätere Felder, falls gewünscht -->
                                            </td>
                                            <td style="height:30px; width:100px"></td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr valign="top" style="height:30px;">
                                <td class="rahmenliou" colspan="2">
                                    <table border="0" style="table-layout:fixed" cellspacing="0" cellpadding="0">
                                        <tr>
                                            <td style="height:30px; width:70px" valign="top"><span class="textg">Ort/Datum</span></td>
                                            <td>
                                                <label for="auszahlungsort" class="visually-hidden">Ort</label>
                                                <input type="text" name="auszahlungsort" id="auszahlungsort" style="width:263px" maxlength="32">
                                            </td>
                                            <td style="width:100px" align="right">
                                                <label for="auszahlungsdatum" class="visually-hidden">Datum</label>
                                                <input type="text" name="auszahlungsdatum" id="auszahlungsdatum" style="width:90px" maxlength="10">
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr valign="top">
                                <td width="217" class="rahmeno"><span class="textk">Buchungsvermerke</span></td>
                                <td width="236" class="rahmeno">
                                    <span class="textk">Stempel/Unterschrift des Empfängers</span>
                                    <br>
                                    <canvas id="signature-auszahlung" width="220" height="60" style="border:1px solid #888; touch-action: none;"></canvas>
                                    <br>
                                    <button type="button" id="clearSignatureAuszahlung">Unterschrift löschen</button>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2"><img src="bilder/leer.gif" width="1" height="33" alt=""></td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </section>
        <section>
            <table width="517" border="0" cellspacing="0" cellpadding="0" class="steuerung">
                <tr>
                    <td align="center">
                        <br>
                        <form id="knoepfe">
                            <input type="button" value="Löschen" id="resetBtn">
                            &nbsp;&nbsp;
                            <input type="button" value="Drucken" id="printBtn">
                        </form>
                    </td>
                </tr>
            </table>
        </section>
    </main>
    <script type="text/javascript">
document.addEventListener('DOMContentLoaded', function () {
    // --- Helper: German number to words ---
    function numberToGermanWords(num) {
        let n = Math.floor(num);
        let cents = Math.round((num - n) * 100);
        let words = getWords(n) + ' Euro';
        if (cents > 0) words += ' und ' + getWords(cents) + ' Cent';
        return words;
    }
    function getWords(n) {
        const units = ['null','eins','zwei','drei','vier','fünf','sechs','sieben','acht','neun'];
        const teens = ['zehn','elf','zwölf','dreizehn','vierzehn','fünfzehn','sechzehn','siebzehn','achtzehn','neunzehn'];
        const tens = ['','','zwanzig','dreißig','vierzig','fünfzig','sechzig','siebzig','achtzig','neunzig'];
        let words = '';
        if (n < 10) words = units[n];
        else if (n < 20) words = teens[n-10];
        else if (n < 100) {
            words = (n%10 === 0 ? '' : units[n%10] + 'und') + tens[Math.floor(n/10)];
        } else if (n < 1000) {
            words = units[Math.floor(n/100)] + 'hundert';
            if (n%100 !== 0) words += getWords(n%100);
        } else if (n < 10000) {
            words = units[Math.floor(n/1000)] + 'tausend';
            if (n%1000 !== 0) words += getWords(n%1000);
        } else {
            words = n.toString();
        }
        return words;
    }

    // --- Helper: Set date and number fields ---
    function setDateAndNumber(dateFieldId, nrFieldId) {
        const today = new Date();
        const datum = today.toLocaleDateString('de-DE');
        document.getElementById(dateFieldId).value = datum;
        const yyyy = today.getFullYear();
        const mm = String(today.getMonth() + 1).padStart(2, '0');
        const dd = String(today.getDate()).padStart(2, '0');
        document.getElementById(nrFieldId).value = `${yyyy}-${mm}-${dd}-0001`;
    }

    // --- Helper: Signature Pad ---
    function initSignaturePad(canvasId, clearBtnId) {
        const canvas = document.getElementById(canvasId);
        const ctx = canvas.getContext('2d');
        let drawing = false;
        function unfocusInputs() {
            const active = document.activeElement;
            if (active && active.tagName === 'INPUT' && active.type === 'text') {
                active.blur();
            }
        }
        function getPos(e) {
            if (e.touches) {
                return {
                    x: e.touches[0].clientX - canvas.getBoundingClientRect().left,
                    y: e.touches[0].clientY - canvas.getBoundingClientRect().top
                };
            } else {
                return {
                    x: e.clientX - canvas.getBoundingClientRect().left,
                    y: e.clientY - canvas.getBoundingClientRect().top
                };
            }
        }
        function startDraw(e) {
            drawing = true;
            unfocusInputs();
            const pos = getPos(e);
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
            e.preventDefault();
        }
        function draw(e) {
            if (!drawing) return;
            const pos = getPos(e);
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
            e.preventDefault();
        }
        function endDraw(e) {
            drawing = false;
            e.preventDefault();
        }
        // Mouse events
        canvas.addEventListener('mousedown', startDraw);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', endDraw);
        canvas.addEventListener('mouseleave', endDraw);
        // Touch events
        canvas.addEventListener('touchstart', startDraw);
        canvas.addEventListener('touchmove', draw);
        canvas.addEventListener('touchend', endDraw);
        // Clear button
        document.getElementById(clearBtnId).addEventListener('click', function () {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        });
    }

    // --- Auszahlungsquittung ---
    setDateAndNumber('auszahlungsdatum', 'auszahlungsnr');
    document.getElementById('ausgezahltvon').value = 'Kassenwart (Simon Kloker)';
    document.getElementById('auszahlungsort').value = 'Karlsbad';
    function updateAuszahlungsWorte() {
        const betrag = parseFloat(document.getElementById('auszahlungsbetrag').value.replace(',', '.')) || 0;
        document.getElementById('auszahlungsworte').value = betrag ? numberToGermanWords(betrag) : '';
    }
    document.getElementById('auszahlungsbetrag').addEventListener('input', updateAuszahlungsWorte);

    // --- Signature Pad ---
    initSignaturePad('signature-auszahlung', 'clearSignatureAuszahlung');

    // --- Button actions ---
    document.getElementById('resetBtn').addEventListener('click', function () {
        // Reset all relevant fields
        document.getElementById('auszahlungsbetrag').value = '';
        document.getElementById('auszahlungsgrund').value = '';
        document.getElementById('auszahlungsnr').value = '';
        document.getElementById('auszahlungsworte').value = '';
        document.getElementById('auszahlungsempfaenger').value = '';
        document.getElementById('ausgezahltvon').value = 'Kassenwart (Simon Kloker)';
        document.getElementById('auszahlungsort').value = 'Karlsbad';
        setDateAndNumber('auszahlungsdatum', 'auszahlungsnr');
        updateAuszahlungsWorte();
    });

    document.getElementById('printBtn').addEventListener('click', function () {
        window.print();
        document.getElementById('auszahlungsbetrag').focus();
    });
});
    </script>
</body>
</html>